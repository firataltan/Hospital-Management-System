<!DOCTYPE html>
<html lang="tr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${title} ?: 'Ã‡alÄ±ÅŸma Saatleri'">Ã‡alÄ±ÅŸma Saatleri</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="nav">
                <a th:href="@{/doktor/dashboard}" class="nav-brand">ğŸ¥ Randevu Sistemi</a>
                <ul class="nav-links">
                    <li><a th:href="@{/doktor/dashboard}">Dashboard</a></li>
                    <li><a th:href="@{/doktor/randevular}">Randevular</a></li>
                    <li><a th:href="@{/doktor/profil}">Profilim</a></li>
                    <li><a th:href="@{/doktor/calisma-saatleri}" class="text-warning">Ã‡alÄ±ÅŸma Saatleri</a></li>
                    <li>
                        <form th:action="@{/logout}" method="post" style="display: inline;">
                            <button type="submit" class="nav-link" style="background: none; border: none; color: inherit; cursor: pointer; padding: 0;">
                                Ã‡Ä±kÄ±ÅŸ
                            </button>
                        </form>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Ana Ä°Ã§erik -->
    <main class="container" style="padding: 2rem 0;">
        <!-- Sayfa BaÅŸlÄ±ÄŸÄ± -->
        <div class="mb-4">
            <h1 style="color: #333; margin-bottom: 0.5rem;">
                â° Ã‡alÄ±ÅŸma Saatleri ve Randevu AyarlarÄ±
            </h1>
            <p style="color: #6c757d; font-size: 1.1rem; margin: 0;">
                Randevu kabul durumunuzu, Ã§alÄ±ÅŸma saatlerinizi ve randevu sÃ¼resini ayarlayÄ±n
            </p>
        </div>

        <!-- Alert MesajlarÄ± -->
        <div th:if="${success}" class="alert alert-success">
            <strong>âœ… BaÅŸarÄ±lÄ±:</strong> <span th:text="${success}">BaÅŸarÄ± mesajÄ±</span>
        </div>
        
        <div th:if="${error}" class="alert alert-danger">
            <strong>âŒ Hata:</strong> <span th:text="${error}">Hata mesajÄ±</span>
        </div>

        <div class="row">
            <!-- Ã‡alÄ±ÅŸma Saatleri Formu -->
            <div class="col-8">
                <div class="card">
                    <div class="card-header">
                        <h3 style="margin: 0; color: #333;">
                            âš™ï¸ Ã‡alÄ±ÅŸma Saatleri
                        </h3>
                    </div>
                    <div class="card-body">
                        <form th:action="@{/doktor/calisma-saatleri}" method="post" id="calismaSaatiForm">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="workStartTime" class="form-label">BaÅŸlangÄ±Ã§ Saati *</label>
                                        <input type="time" 
                                               id="workStartTime" 
                                               name="workStartTime" 
                                               class="form-control" 
                                               th:value="${doktor.workStartTime}" 
                                               required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="workEndTime" class="form-label">BitiÅŸ Saati *</label>
                                        <input type="time" 
                                               id="workEndTime" 
                                               name="workEndTime" 
                                               class="form-control" 
                                               th:value="${doktor.workEndTime}" 
                                               required>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="appointmentDuration" class="form-label">Randevu SÃ¼resi (Dakika) *</label>
                                <select id="appointmentDuration" name="appointmentDuration" class="form-control form-select" required>
                                    <option value="">SeÃ§iniz</option>
                                    <option value="15" th:selected="${doktor.appointmentDuration == 15}">15 Dakika</option>
                                    <option value="20" th:selected="${doktor.appointmentDuration == 20}">20 Dakika</option>
                                    <option value="30" th:selected="${doktor.appointmentDuration == 30}">30 Dakika</option>
                                    <option value="45" th:selected="${doktor.appointmentDuration == 45}">45 Dakika</option>
                                    <option value="60" th:selected="${doktor.appointmentDuration == 60}">60 Dakika</option>
                                </select>
                            </div>
                            
                            <div class="text-end">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    ğŸ’¾ Ã‡alÄ±ÅŸma Saatlerini Kaydet
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Randevu Kabul Durumu -->
            <div class="col-4">
                <div class="card">
                    <div class="card-header">
                        <h3 style="margin: 0; color: #333;">
                            ğŸ“Š Randevu Kabul Durumu
                        </h3>
                    </div>
                    <div class="card-body text-center">
                        <div style="font-size: 4rem; margin-bottom: 1rem;" 
                             th:text="${doktor.acceptingAppointments ? 'âœ…' : 'â¸ï¸'}">âœ…</div>
                        <h4 style="margin-bottom: 1rem; color: #333;">
                            <span th:if="${doktor.acceptingAppointments}">Randevu Kabul Ediyor</span>
                            <span th:unless="${doktor.acceptingAppointments}">Randevu Kabul Etmiyor</span>
                        </h4>
                        <p style="color: #6c757d; margin-bottom: 1.5rem;">
                            Randevu almayÄ± <span th:if="${doktor.acceptingAppointments}">durdurabilir</span>
                            <span th:unless="${doktor.acceptingAppointments}">baÅŸlatabilir</span>siniz.
                        </p>
                        <form th:action="@{/doktor/toggle-appointments}" method="post">
                            <button type="submit" 
                                    class="btn w-100"
                                    th:classappend="${doktor.acceptingAppointments ? 'btn-danger' : 'btn-success'}">
                                <span th:if="${doktor.acceptingAppointments}">â¸ï¸ Randevu KabulÃ¼nÃ¼ Durdur</span>
                                <span th:unless="${doktor.acceptingAppointments}">â–¶ï¸ Randevu KabulÃ¼nÃ¼ BaÅŸlat</span>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Randevu Sistemi. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Form validasyonu
        document.getElementById('calismaSaatiForm').addEventListener('submit', function(e) {
            const startTime = document.getElementById('workStartTime').value;
            const endTime = document.getElementById('workEndTime').value;
            
            if (startTime && endTime) {
                const start = new Date('2000/01/01 ' + startTime);
                const end = new Date('2000/01/01 ' + endTime);

                if (start >= end) {
                    e.preventDefault();
                    alert('âš ï¸ BaÅŸlangÄ±Ã§ saati bitiÅŸ saatinden Ã¶nce olmalÄ±dÄ±r!');
                    return;
                }
            }
        });
    </script>
</body>
</html> 