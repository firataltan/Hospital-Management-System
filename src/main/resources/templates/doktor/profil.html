<!DOCTYPE html>
<html lang="tr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${title} ?: 'Doktor Profili'">Doktor Profili</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="nav">
                <a th:href="@{/doktor/dashboard}" class="nav-brand">ğŸ¥ Randevu Sistemi</a>
                <ul class="nav-links">
                    <li><a th:href="@{/doktor/dashboard}">Dashboard</a></li>
                    <li><a th:href="@{/doktor/randevular}">Randevular</a></li>
                    <li><a th:href="@{/doktor/profil}" class="text-warning">Profilim</a></li>
                    <li><a th:href="@{/doktor/calisma-saatleri}">Ã‡alÄ±ÅŸma Saatleri</a></li>
                    <li>
                        <form th:action="@{/logout}" method="post" style="display: inline;">
                            <button type="submit" class="nav-link" style="background: none; border: none; color: inherit; cursor: pointer; padding: 0;">
                                Ã‡Ä±kÄ±ÅŸ
                            </button>
                        </form>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Ana Ä°Ã§erik -->
    <main class="container" style="padding: 2rem 0;">
        <!-- Sayfa BaÅŸlÄ±ÄŸÄ± -->
        <div class="mb-4">
            <h1 style="color: #333; margin-bottom: 0.5rem;">
                ğŸ‘¨â€âš•ï¸ Doktor Profili
            </h1>
            <p style="color: #6c757d; font-size: 1.1rem; margin: 0;">
                Profil bilgilerinizi gÃ¶rÃ¼ntÃ¼leyin ve gÃ¼ncelleyin
            </p>
        </div>

        <!-- Alert MesajlarÄ± -->
        <div th:if="${success}" class="alert alert-success">
            <strong>âœ… BaÅŸarÄ±lÄ±:</strong> <span th:text="${success}">BaÅŸarÄ± mesajÄ±</span>
        </div>
        
        <div th:if="${error}" class="alert alert-danger">
            <strong>âŒ Hata:</strong> <span th:text="${error}">Hata mesajÄ±</span>
        </div>

        <div class="row">
            <!-- Sol Kolon - Profil Formu -->
            <div class="col-8">
                <div class="card">
                    <div class="card-header">
                        <h3 style="margin: 0; color: #333;">
                            âœï¸ Profil Bilgileri
                        </h3>
                    </div>
                    <div class="card-body">
                        <form th:action="@{/doktor/profil}" method="post" th:object="${doktor}" id="profileForm">
                            <div class="row">
                                <!-- Sol Alt Kolon -->
                                <div class="col-6">
                                    <!-- Ad -->
                                    <div class="form-group">
                                        <label for="firstName" class="form-label">ğŸ“ Ad *</label>
                                        <input type="text" 
                                               id="firstName" 
                                               th:field="*{firstName}"
                                               class="form-control" 
                                               placeholder="AdÄ±nÄ±zÄ± girin"
                                               required
                                               maxlength="50">
                                    </div>

                                    <!-- Soyad -->
                                    <div class="form-group">
                                        <label for="lastName" class="form-label">ğŸ“ Soyad *</label>
                                        <input type="text" 
                                               id="lastName" 
                                               th:field="*{lastName}"
                                               class="form-control" 
                                               placeholder="SoyadÄ±nÄ±zÄ± girin"
                                               required
                                               maxlength="50">
                                    </div>

                                    <!-- Email -->
                                    <div class="form-group">
                                        <label for="email" class="form-label">ğŸ“§ Email *</label>
                                        <input type="email" 
                                               id="email" 
                                               th:field="*{email}"
                                               class="form-control" 
                                               placeholder="email@ornek.com"
                                               required
                                               maxlength="100">
                                    </div>

                                    <!-- Telefon -->
                                    <div class="form-group">
                                        <label for="phone" class="form-label">ğŸ“ Telefon</label>
                                        <input type="tel" 
                                               id="phone" 
                                               th:field="*{phone}"
                                               class="form-control" 
                                               placeholder="0555 123 45 67"
                                               maxlength="15">
                                    </div>

                                    <!-- UzmanlÄ±k AlanÄ± -->
                                    <div class="form-group">
                                        <label for="specialization" class="form-label">ğŸ©º UzmanlÄ±k AlanÄ± *</label>
                                        <select id="specialization" th:field="*{specialization}" class="form-control form-select" required>
                                            <option value="">SeÃ§iniz</option>
                                            <option value="Kardiyoloji">Kardiyoloji</option>
                                            <option value="NÃ¶roloji">NÃ¶roloji</option>
                                            <option value="Ortopedi">Ortopedi</option>
                                            <option value="GÃ¶ÄŸÃ¼s HastalÄ±klarÄ±">GÃ¶ÄŸÃ¼s HastalÄ±klarÄ±</option>
                                            <option value="Dahiliye">Dahiliye</option>
                                            <option value="Ãœroloji">Ãœroloji</option>
                                            <option value="KadÄ±n DoÄŸum">KadÄ±n DoÄŸum</option>
                                            <option value="Ã‡ocuk SaÄŸlÄ±ÄŸÄ±">Ã‡ocuk SaÄŸlÄ±ÄŸÄ±</option>
                                            <option value="GÃ¶z HastalÄ±klarÄ±">GÃ¶z HastalÄ±klarÄ±</option>
                                            <option value="Kulak Burun BoÄŸaz">Kulak Burun BoÄŸaz</option>
                                            <option value="Cildiye">Cildiye</option>
                                            <option value="Psikiyatri">Psikiyatri</option>
                                            <option value="DiÄŸer">DiÄŸer</option>
                                        </select>
                                    </div>
                                </div>

                                <!-- SaÄŸ Alt Kolon -->
                                <div class="col-6">
                                    <!-- Hastane -->
                                    <div class="form-group">
                                        <label for="hospital" class="form-label">ğŸ¥ Hastane/Klinik</label>
                                        <input type="text" 
                                               id="hospital" 
                                               th:field="*{hospital}"
                                               class="form-control" 
                                               placeholder="Ã‡alÄ±ÅŸtÄ±ÄŸÄ±nÄ±z hastane"
                                               maxlength="200">
                                    </div>

                                    <!-- Deneyim YÄ±lÄ± -->
                                    <div class="form-group">
                                        <label for="experienceYears" class="form-label">ğŸ“… Deneyim (YÄ±l)</label>
                                        <input type="number" 
                                               id="experienceYears" 
                                               th:field="*{experienceYears}"
                                               class="form-control" 
                                               placeholder="5"
                                               min="0"
                                               max="50">
                                    </div>

                                    <!-- Randevu Ãœcreti -->
                                    <div class="form-group">
                                        <label for="consultationFee" class="form-label">ğŸ’° Randevu Ãœcreti (TL)</label>
                                        <input type="number" 
                                               id="consultationFee" 
                                               th:field="*{consultationFee}"
                                               class="form-control" 
                                               placeholder="200"
                                               min="0"
                                               step="0.01">
                                    </div>

                                    <!-- Diploma NumarasÄ± (Readonly) -->
                                    <div class="form-group">
                                        <label for="diplomaNo" class="form-label">ğŸ“ Diploma NumarasÄ±</label>
                                        <input type="text" 
                                               id="diplomaNo" 
                                               th:value="${doktor.diplomaNo}"
                                               class="form-control" 
                                               readonly
                                               style="background-color: #f8f9fa;">
                                        <small style="color: #6c757d;">Diploma numarasÄ± deÄŸiÅŸtirilemez.</small>
                                    </div>

                                    <!-- KullanÄ±cÄ± AdÄ± (Readonly) -->
                                    <div class="form-group">
                                        <label for="username" class="form-label">ğŸ‘¤ KullanÄ±cÄ± AdÄ±</label>
                                        <input type="text" 
                                               id="username" 
                                               th:value="${doktor.username}"
                                               class="form-control" 
                                               readonly
                                               style="background-color: #f8f9fa;">
                                        <small style="color: #6c757d;">KullanÄ±cÄ± adÄ± deÄŸiÅŸtirilemez.</small>
                                    </div>
                                </div>
                            </div>

                            <!-- Muayenehane Adresi -->
                            <div class="form-group">
                                <label for="clinicAddress" class="form-label">ğŸ¢ Muayenehane Adresi</label>
                                <textarea id="clinicAddress" 
                                          th:field="*{clinicAddress}"
                                          class="form-control textarea" 
                                          placeholder="Muayenehane adresinizi girin"
                                          maxlength="500"></textarea>
                            </div>

                            <!-- HakkÄ±nda -->
                            <div class="form-group">
                                <label for="about" class="form-label">ğŸ“‹ HakkÄ±nÄ±zda</label>
                                <textarea id="about" 
                                          th:field="*{about}"
                                          class="form-control textarea" 
                                          placeholder="Kendiniz ve uzmanlÄ±ÄŸÄ±nÄ±z hakkÄ±nda bilgi"
                                          maxlength="1000"
                                          style="min-height: 120px;"></textarea>
                                <small style="color: #6c757d;">Bu bilgiler hastalara gÃ¶sterilecektir.</small>
                            </div>

                            <!-- GÃ¼ncelle Butonu -->
                            <div class="form-group text-center">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    ğŸ’¾ Profili GÃ¼ncelle
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- SaÄŸ Kolon - Profil Ã–zeti ve Ä°ÅŸlemler -->
            <div class="col-4">
                <!-- Profil Ã–zeti -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h3 style="margin: 0; color: #333;">
                            ğŸ‘¨â€âš•ï¸ Profil Ã–zeti
                        </h3>
                    </div>
                    <div class="card-body text-center">
                        <!-- Avatar -->
                        <div style="width: 100px; height: 100px; border-radius: 50%; 
                                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                                    display: flex; align-items: center; justify-content: center;
                                    font-size: 2.5rem; color: white; margin: 0 auto 1rem;"
                             th:text="${doktor.firstName.substring(0,1).toUpperCase() + doktor.lastName.substring(0,1).toUpperCase()}">
                            AY
                        </div>
                        
                        <h4 style="margin-bottom: 0.5rem;" th:text="${doktor.doctorTitle}">
                            Dr. Ahmet YÄ±lmaz
                        </h4>
                        
                        <p style="color: #007bff; font-weight: 600; margin-bottom: 1rem;" th:text="${doktor.specialization}">
                            Kardiyoloji
                        </p>
                        
                        <!-- Durum Badge -->
                        <div style="margin-bottom: 1rem;">
                            <span class="badge" 
                                  th:classappend="${doktor.acceptingAppointments ? 'badge-success' : 'badge-warning'}"
                                  th:text="${doktor.acceptingAppointments ? 'âœ… Aktif' : 'â¸ï¸ Pasif'}">
                                âœ… Aktif
                            </span>
                        </div>
                        
                        <!-- Ã–zet Bilgiler -->
                        <div style="text-align: left; font-size: 0.9rem; background: #f8f9fa; padding: 1rem; border-radius: 8px;">
                            <div style="margin-bottom: 0.5rem;">
                                <strong>ğŸ“§ Email:</strong><br>
                                <span th:text="${doktor.email}">email@ornek.com</span>
                            </div>
                            <div style="margin-bottom: 0.5rem;" th:if="${doktor.phone}">
                                <strong>ğŸ“ Telefon:</strong><br>
                                <span th:text="${doktor.phone}">0555 123 45 67</span>
                            </div>
                            <div style="margin-bottom: 0.5rem;" th:if="${doktor.hospital}">
                                <strong>ğŸ¥ Hastane:</strong><br>
                                <span th:text="${doktor.hospital}">AtatÃ¼rk Hastanesi</span>
                            </div>
                            <div style="margin-bottom: 0.5rem;" th:if="${doktor.experienceYears}">
                                <strong>ğŸ“… Deneyim:</strong><br>
                                <span th:text="${doktor.experienceYears + ' yÄ±l'}">5 yÄ±l</span>
                            </div>
                            <div th:if="${doktor.consultationFee}">
                                <strong>ğŸ’° Ãœcret:</strong><br>
                                <span th:text="${doktor.consultationFee + ' TL'}">200 TL</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- HÄ±zlÄ± Ä°ÅŸlemler -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h3 style="margin: 0; color: #333;">
                            âš¡ HÄ±zlÄ± Ä°ÅŸlemler
                        </h3>
                    </div>
                    <div class="card-body">
                        <a th:href="@{/doktor/sifre-degistir}" class="btn btn-warning w-100 mb-2">
                            ğŸ”’ Åifre DeÄŸiÅŸtir
                        </a>
                        <a th:href="@{/doktor/calisma-saatleri}" class="btn btn-info w-100 mb-2">
                            â° Ã‡alÄ±ÅŸma Saatleri
                        </a>
                        <a th:href="@{/doktor/dashboard}" class="btn btn-primary w-100 mb-2">
                            ğŸ“Š Dashboard'a DÃ¶n
                        </a>
                        <button type="button" class="btn btn-secondary w-100" onclick="previewProfile()">
                            ğŸ‘ï¸ Profil Ã–nizleme
                        </button>
                    </div>
                </div>

                <!-- Profil Tamamlanma Durumu -->
                <div class="card">
                    <div class="card-header">
                        <h3 style="margin: 0; color: #333;">
                            ğŸ“Š Profil Tamamlanma
                        </h3>
                    </div>
                    <div class="card-body">
                        <div id="profileCompleteness">
                            <!-- JavaScript ile doldurulacak -->
                        </div>
                        
                        <div style="margin-top: 1rem;">
                            <div class="progress-bar">
                                <div id="progressFill" class="progress-fill"></div>
                            </div>
                            <div style="text-align: center; margin-top: 0.5rem; font-weight: 600;" id="progressText">
                                0% TamamlandÄ±
                            </div>
                        </div>
                        
                        <div style="margin-top: 1rem; font-size: 0.9rem; color: #6c757d;">
                            <div style="margin-bottom: 0.5rem;">
                                ğŸ’¡ <strong>Ä°pucu:</strong> Profil bilgilerinizi eksiksiz doldurarak hastalardan daha fazla randevu alabilirsiniz.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Profil Ã–nizleme Modal -->
    <div id="previewModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2 class="modal-title">ğŸ‘ï¸ Profil Ã–nizleme</h2>
                <span class="close" onclick="closePreviewModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div id="profilePreview">
                    <!-- Profil Ã¶nizlemesi buraya yÃ¼klenecek -->
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 Randevu Sistemi. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Profil tamamlanma durumunu hesapla
        function calculateProfileCompleteness() {
            const fields = {
                'firstName': document.getElementById('firstName').value.trim(),
                'lastName': document.getElementById('lastName').value.trim(),
                'email': document.getElementById('email').value.trim(),
                'phone': document.getElementById('phone').value.trim(),
                'specialization': document.getElementById('specialization').value,
                'hospital': document.getElementById('hospital').value.trim(),
                'experienceYears': document.getElementById('experienceYears').value,
                'consultationFee': document.getElementById('consultationFee').value,
                'clinicAddress': document.getElementById('clinicAddress').value.trim(),
                'about': document.getElementById('about').value.trim()
            };
            
            const requiredFields = ['firstName', 'lastName', 'email', 'specialization'];
            const optionalFields = ['phone', 'hospital', 'experienceYears', 'consultationFee', 'clinicAddress', 'about'];
            
            let completed = 0;
            let total = requiredFields.length + optionalFields.length;
            let missing = [];
            
            // Zorunlu alanlarÄ± kontrol et
            requiredFields.forEach(field => {
                if (fields[field]) {
                    completed++;
                } else {
                    missing.push(getFieldName(field) + ' (Zorunlu)');
                }
            });
            
            // Ä°steÄŸe baÄŸlÄ± alanlarÄ± kontrol et
            optionalFields.forEach(field => {
                if (fields[field]) {
                    completed++;
                } else {
                    missing.push(getFieldName(field));
                }
            });
            
            const percentage = Math.round((completed / total) * 100);
            
            // Progress bar gÃ¼ncelle
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressText').textContent = percentage + '% TamamlandÄ±';
            
            // Eksik alanlarÄ± gÃ¶ster
            const completenessDiv = document.getElementById('profileCompleteness');
            if (missing.length > 0) {
                completenessDiv.innerHTML = `
                    <div style="margin-bottom: 1rem;">
                        <strong style="color: #dc3545;">Eksik Alanlar:</strong>
                    </div>
                    <div style="font-size: 0.85rem;">
                        ${missing.map(field => `<div style="color: #6c757d;">â€¢ ${field}</div>`).join('')}
                    </div>
                `;
            } else {
                completenessDiv.innerHTML = `
                    <div style="color: #28a745; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ‰</div>
                        <strong>Profiliniz TamamlandÄ±!</strong>
                    </div>
                `;
            }
        }
        
        // Alan adlarÄ±nÄ± TÃ¼rkÃ§e'ye Ã§evir
        function getFieldName(field) {
            const names = {
                'firstName': 'Ad',
                'lastName': 'Soyad',
                'email': 'Email',
                'phone': 'Telefon',
                'specialization': 'UzmanlÄ±k AlanÄ±',
                'hospital': 'Hastane',
                'experienceYears': 'Deneyim YÄ±lÄ±',
                'consultationFee': 'Randevu Ãœcreti',
                'clinicAddress': 'Muayenehane Adresi',
                'about': 'HakkÄ±nda'
            };
            return names[field] || field;
        }
        
        // Profil Ã¶nizlemesi gÃ¶ster
        function previewProfile() {
            const preview = `
                <div class="doktor-card card" style="margin: 0;">
                    <div class="card-body text-center">
                        <div class="doktor-avatar" style="margin: 0 auto 1rem;">
                            ${document.getElementById('firstName').value.charAt(0).toUpperCase()}${document.getElementById('lastName').value.charAt(0).toUpperCase()}
                        </div>
                        
                        <h4 class="card-title">Dr. ${document.getElementById('firstName').value} ${document.getElementById('lastName').value}</h4>
                        
                        <div class="doktor-specialty">${document.getElementById('specialization').value || 'UzmanlÄ±k alanÄ± belirtilmemiÅŸ'}</div>
                        
                        <div class="doktor-hospital">${document.getElementById('hospital').value || 'Hastane belirtilmemiÅŸ'}</div>
                        
                        <div style="margin: 1rem 0; font-size: 0.9rem; color: #6c757d;">
                            ${document.getElementById('experienceYears').value ? `<div>ğŸ“… ${document.getElementById('experienceYears').value} yÄ±l deneyim</div>` : ''}
                            ${document.getElementById('consultationFee').value ? `<div>ğŸ’° ${document.getElementById('consultationFee').value} TL</div>` : ''}
                            <div>ğŸ“§ ${document.getElementById('email').value}</div>
                            ${document.getElementById('phone').value ? `<div>ğŸ“ ${document.getElementById('phone').value}</div>` : ''}
                        </div>
                        
                        ${document.getElementById('about').value ? `
                            <div style="margin: 1rem 0; font-size: 0.85rem; color: #495057; text-align: left;">
                                <strong>HakkÄ±nda:</strong><br>
                                ${document.getElementById('about').value}
                            </div>
                        ` : ''}
                        
                        ${document.getElementById('clinicAddress').value ? `
                            <div style="margin: 1rem 0; font-size: 0.85rem; color: #495057; text-align: left;">
                                <strong>ğŸ¢ Muayenehane:</strong><br>
                                ${document.getElementById('clinicAddress').value}
                            </div>
                        ` : ''}
                        
                        <button type="button" class="btn btn-primary w-100" disabled>
                            ğŸ“… Randevu Al
                        </button>
                    </div>
                </div>
                
                <div style="margin-top: 1rem; text-align: center; color: #6c757d; font-size: 0.9rem;">
                    Bu Ã¶nizleme hastalarÄ±nÄ±zÄ±n gÃ¶receÄŸi profil kartÄ±nÄ±zÄ± gÃ¶sterir.
                </div>
            `;
            
            document.getElementById('profilePreview').innerHTML = preview;
            document.getElementById('previewModal').style.display = 'block';
        }
        
        // Ã–nizleme modal'Ä±nÄ± kapat
        function closePreviewModal() {
            document.getElementById('previewModal').style.display = 'none';
        }
        
        // Modal dÄ±ÅŸÄ±na tÄ±klanÄ±rsa kapat
        window.onclick = function(event) {
            const modal = document.getElementById('previewModal');
           if (event.target == modal) {
               closePreviewModal();
           }
       }

       // Sayfa yÃ¼klendiÄŸinde
       document.addEventListener('DOMContentLoaded', function() {
           // Profil tamamlanma durumunu hesapla
           calculateProfileCompleteness();
           
           // Form alanlarÄ± deÄŸiÅŸtiÄŸinde tekrar hesapla
           const formFields = document.querySelectorAll('#profileForm input, #profileForm select, #profileForm textarea');
           formFields.forEach(field => {
               field.addEventListener('input', calculateProfileCompleteness);
               field.addEventListener('change', calculateProfileCompleteness);
           });

           // Telefon numarasÄ± formatÄ±
           document.getElementById('phone').addEventListener('input', function(e) {
               let value = e.target.value.replace(/[^0-9]/g, '');
               if (value.length > 0) {
                   if (value.length <= 4) {
                       value = value;
                   } else if (value.length <= 7) {
                       value = value.slice(0, 4) + ' ' + value.slice(4);
                   } else if (value.length <= 9) {
                       value = value.slice(0, 4) + ' ' + value.slice(4, 7) + ' ' + value.slice(7);
                   } else {
                       value = value.slice(0, 4) + ' ' + value.slice(4, 7) + ' ' + value.slice(7, 9) + ' ' + value.slice(9, 11);
                   }
               }
               e.target.value = value;
           });

           // Karakter sayacÄ± (about alanÄ± iÃ§in)
           const aboutTextarea = document.getElementById('about');
           if (aboutTextarea) {
               const charCountDiv = document.createElement('div');
               charCountDiv.style.textAlign = 'right';
               charCountDiv.style.fontSize = '0.8rem';
               charCountDiv.style.color = '#6c757d';
               charCountDiv.style.marginTop = '0.25rem';
               aboutTextarea.parentNode.appendChild(charCountDiv);
               
               function updateCharCount() {
                   const remaining = 1000 - aboutTextarea.value.length;
                   charCountDiv.textContent = `${aboutTextarea.value.length}/1000 karakter`;
                   charCountDiv.style.color = remaining < 100 ? '#dc3545' : '#6c757d';
               }
               
               aboutTextarea.addEventListener('input', updateCharCount);
               updateCharCount();
           }

           // Form animasyonlarÄ±
           const cards = document.querySelectorAll('.card');
           cards.forEach(card => {
               card.addEventListener('mouseenter', function() {
                   this.style.transform = 'translateY(-3px)';
               });
               
               card.addEventListener('mouseleave', function() {
                   this.style.transform = 'translateY(0)';
               });
           });
       });

       // Form validasyonu
       document.getElementById('profileForm').addEventListener('submit', function(e) {
           const firstName = document.getElementById('firstName').value.trim();
           const lastName = document.getElementById('lastName').value.trim();
           const email = document.getElementById('email').value.trim();
           const specialization = document.getElementById('specialization').value;
           
           if (!firstName) {
               e.preventDefault();
               alert('âš ï¸ LÃ¼tfen adÄ±nÄ±zÄ± girin.');
               document.getElementById('firstName').focus();
               return;
           }
           
           if (!lastName) {
               e.preventDefault();
               alert('âš ï¸ LÃ¼tfen soyadÄ±nÄ±zÄ± girin.');
               document.getElementById('lastName').focus();
               return;
           }
           
           if (!email) {
               e.preventDefault();
               alert('âš ï¸ LÃ¼tfen email adresinizi girin.');
               document.getElementById('email').focus();
               return;
           }
           
           if (!specialization) {
               e.preventDefault();
               alert('âš ï¸ LÃ¼tfen uzmanlÄ±k alanÄ±nÄ±zÄ± seÃ§in.');
               document.getElementById('specialization').focus();
               return;
           }
           
           // Email format kontrolÃ¼
           const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
           if (!emailRegex.test(email)) {
               e.preventDefault();
               alert('âš ï¸ LÃ¼tfen geÃ§erli bir email adresi girin.');
               document.getElementById('email').focus();
               return;
           }
           
           // Onay mesajÄ±
           if (!confirm('ğŸ’¾ Profil bilgilerinizi gÃ¼ncellemek istediÄŸinizden emin misiniz?')) {
               e.preventDefault();
               return;
           }
       });

       // Keyboard shortcuts
       document.addEventListener('keydown', function(e) {
           // Ctrl+S ile formu kaydet
           if (e.ctrlKey && e.key === 's') {
               e.preventDefault();
               document.getElementById('profileForm').submit();
           }
           
           // ESC ile modal'larÄ± kapat
           if (e.key === 'Escape') {
               closePreviewModal();
           }
       });
   </script>

   <style>
       .progress-bar {
           width: 100%;
           height: 20px;
           background-color: #e9ecef;
           border-radius: 10px;
           overflow: hidden;
       }
       
       .progress-fill {
           height: 100%;
           background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
           border-radius: 10px;
           transition: width 0.5s ease;
           width: 0%;
       }
       
       .doktor-avatar {
           width: 80px;
           height: 80px;
           border-radius: 50%;
           background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
           display: flex;
           align-items: center;
           justify-content: center;
           font-size: 2rem;
           color: white;
       }
       
       .doktor-specialty {
           color: #6c757d;
           font-size: 0.9rem;
           margin-bottom: 0.5rem;
       }
       
       .doktor-hospital {
           color: #495057;
           font-size: 0.9rem;
           margin-bottom: 1rem;
       }
       
       .form-control:focus {
           border-color: #007bff;
           box-shadow: 0 0 0 3px rgba(0,123,255,0.25);
       }
       
       @media (max-width: 768px) {
           .col-8, .col-6, .col-4 {
               flex: 0 0 100%;
               max-width: 100%;
           }
           
           .modal-content {
               width: 95%;
               margin: 5% auto;
           }
       }
       
       /* Animasyonlar */
       @keyframes slideInUp {
           from {
               opacity: 0;
               transform: translateY(30px);
           }
           to {
               opacity: 1;
               transform: translateY(0);
           }
       }
       
       .card {
           animation: slideInUp 0.6s ease-out;
       }
       
       /* Ã–zel stiller */
       .form-group {
           position: relative;
       }
       
       .form-control[readonly] {
           cursor: not-allowed;
       }
       
       .badge {
           font-size: 0.8rem;
           padding: 0.5rem 1rem;
       }
   </style>
</body>
</html>