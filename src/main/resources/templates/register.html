<!DOCTYPE html>
<html lang="tr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${title} ?: 'KayÄ±t Ol - Randevu Sistemi'">KayÄ±t Ol - Randevu Sistemi</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <nav class="nav">
                <a th:href="@{/}" class="nav-brand">ğŸ¥ Randevu Sistemi</a>
                <ul class="nav-links">
                    <li><a th:href="@{/}">Ana Sayfa</a></li>
                    <li><a th:href="@{/login}">GiriÅŸ Yap</a></li>
                    <li><a th:href="@{/register}" class="text-warning">KayÄ±t Ol</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Ana Ä°Ã§erik -->
    <main class="container" style="padding: 2rem 0;">
        <!-- Hata/BaÅŸarÄ± MesajlarÄ± -->
        <div th:if="${error}" class="alert alert-danger">
            <strong>âŒ Hata:</strong> <span th:text="${error}">Hata mesajÄ±</span>
        </div>
        
        <div th:if="${success}" class="alert alert-success">
            <strong>âœ… BaÅŸarÄ±lÄ±:</strong> <span th:text="${success}">BaÅŸarÄ± mesajÄ±</span>
        </div>

        <!-- KayÄ±t TÃ¼rÃ¼ SeÃ§imi -->
        <div class="text-center mb-4">
            <h1 style="color: #333; margin-bottom: 1rem;">
                ğŸ“ Hesap OluÅŸturun
            </h1>
            <p style="color: #6c757d; font-size: 1.1rem;">
                LÃ¼tfen kayÄ±t olmak istediÄŸiniz hesap tÃ¼rÃ¼nÃ¼ seÃ§in
            </p>
            
            <div style="display: flex; justify-content: center; gap: 1rem; margin: 2rem 0;">
                <button id="hastaTab" class="btn btn-primary btn-lg" onclick="showTab('hasta')">
                    ğŸ¥ Hasta Olarak KayÄ±t Ol
                </button>
                <button id="doktorTab" class="btn btn-secondary btn-lg" onclick="showTab('doktor')">
                    ğŸ‘¨â€âš•ï¸ Doktor Olarak KayÄ±t Ol
                </button>
            </div>
        </div>

        <!-- Hasta KayÄ±t Formu -->
        <div id="hastaForm" class="form-container">
            <div class="row">
                <div class="col-8" style="margin: 0 auto;">
                    <div class="card fade-in">
                        <div class="card-header text-center">
                            <h2 style="margin: 0; color: #333;">
                                ğŸ¥ Hasta KayÄ±t Formu
                            </h2>
                            <p style="margin: 0.5rem 0 0; color: #6c757d;">
                                Randevu alabilmek iÃ§in bilgilerinizi girin
                            </p>
                        </div>
                        <div class="card-body">
                            <form th:action="@{/register/hasta}" method="post" id="hastaRegisterForm">
                                <div class="row">
                                    <!-- Sol Kolon -->
                                    <div class="col-6">
                                        <!-- KullanÄ±cÄ± AdÄ± -->
                                        <div class="form-group">
                                            <label for="hastaUsername" class="form-label">
                                                ğŸ‘¤ KullanÄ±cÄ± AdÄ± *
                                            </label>
                                            <input type="text" 
                                                   id="hastaUsername" 
                                                   name="username" 
                                                   class="form-control" 
                                                   placeholder="KullanÄ±cÄ± adÄ±nÄ±zÄ± girin"
                                                   required
                                                   minlength="3"
                                                   maxlength="50">
                                            <small class="availability-message" id="hastaUsernameCheck"></small>
                                        </div>

                                        <!-- Ad -->
                                        <div class="form-group">
                                            <label for="hastaFirstName" class="form-label">
                                                ğŸ“ Ad *
                                            </label>
                                            <input type="text" 
                                                   id="hastaFirstName" 
                                                   name="firstName" 
                                                   class="form-control" 
                                                   placeholder="AdÄ±nÄ±zÄ± girin"
                                                   required
                                                   maxlength="50">
                                        </div>

                                        <!-- Soyad -->
                                        <div class="form-group">
                                            <label for="hastaLastName" class="form-label">
                                                ğŸ“ Soyad *
                                            </label>
                                            <input type="text" 
                                                   id="hastaLastName" 
                                                   name="lastName" 
                                                   class="form-control" 
                                                   placeholder="SoyadÄ±nÄ±zÄ± girin"
                                                   required
                                                   maxlength="50">
                                        </div>

                                        <!-- Email -->
                                        <div class="form-group">
                                            <label for="hastaEmail" class="form-label">
                                                ğŸ“§ Email *
                                            </label>
                                            <input type="email" 
                                                   id="hastaEmail" 
                                                   name="email" 
                                                   class="form-control" 
                                                   placeholder="email@ornek.com"
                                                   required
                                                   maxlength="100">
                                            <small class="availability-message" id="hastaEmailCheck"></small>
                                        </div>

                                        <!-- Telefon -->
                                        <div class="form-group">
                                            <label for="hastaPhone" class="form-label">
                                                ğŸ“ Telefon
                                            </label>
                                            <input type="tel" 
                                                   id="hastaPhone" 
                                                   name="phone" 
                                                   class="form-control" 
                                                   placeholder="0555 123 45 67"
                                                   maxlength="15">
                                        </div>
                                    </div>

                                    <!-- SaÄŸ Kolon -->
                                    <div class="col-6">
                                        <!-- Åifre -->
                                        <div class="form-group">
                                            <label for="hastaPassword" class="form-label">
                                                ğŸ”’ Åifre *
                                            </label>
                                            <input type="password" 
                                                   id="hastaPassword" 
                                                   name="password" 
                                                   class="form-control" 
                                                   placeholder="En az 6 karakter"
                                                   required
                                                   minlength="6">
                                        </div>

                                        <!-- Åifre Tekrar -->
                                        <div class="form-group">
                                            <label for="hastaPasswordConfirm" class="form-label">
                                                ğŸ”’ Åifre Tekrar *
                                            </label>
                                            <input type="password" 
                                                   id="hastaPasswordConfirm" 
                                                   name="passwordConfirm" 
                                                   class="form-control" 
                                                   placeholder="Åifrenizi tekrar girin"
                                                   required
                                                   minlength="6">
                                            <small class="password-match-message" id="hastaPasswordMatch"></small>
                                        </div>

                                        <!-- T.C. Kimlik No -->
                                        <div class="form-group">
                                            <label for="hastaTcNo" class="form-label">
                                                ğŸ†” T.C. Kimlik No
                                            </label>
                                            <input type="text" 
                                                   id="hastaTcNo" 
                                                   name="tcNo" 
                                                   class="form-control" 
                                                   placeholder="12345678901"
                                                   maxlength="11"
                                                   pattern="[0-9]{11}">
                                            <small class="availability-message" id="hastaTcCheck"></small>
                                        </div>

                                        <!-- DoÄŸum Tarihi -->
                                        <div class="form-group">
                                            <label for="hastaBirthDate" class="form-label">
                                                ğŸ‚ DoÄŸum Tarihi
                                            </label>
                                            <input type="date" 
                                                   id="hastaBirthDate" 
                                                   name="birthDate" 
                                                   class="form-control">
                                        </div>

                                        <!-- Cinsiyet -->
                                        <div class="form-group">
                                            <label for="hastaGender" class="form-label">
                                                ğŸ‘« Cinsiyet
                                            </label>
                                            <select id="hastaGender" name="gender" class="form-control form-select">
                                                <option value="">SeÃ§iniz</option>
                                                <option value="Erkek">Erkek</option>
                                                <option value="KadÄ±n">KadÄ±n</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <!-- Adres -->
                                <div class="form-group">
                                    <label for="hastaAddress" class="form-label">
                                        ğŸ  Adres
                                    </label>
                                    <textarea id="hastaAddress" 
                                              name="address" 
                                              class="form-control textarea" 
                                              placeholder="Ev/iÅŸ adresinizi girin"
                                              maxlength="500"></textarea>
                                </div>

                                <!-- Acil Durum Ä°letiÅŸim -->
                                <div class="row">
                                    <div class="col-6">
                                        <div class="form-group">
                                            <label for="hastaEmergencyContact" class="form-label">
                                                ğŸš¨ Acil Durum Ä°letiÅŸim KiÅŸisi
                                            </label>
                                            <input type="text" 
                                                   id="hastaEmergencyContact" 
                                                   name="emergencyContact" 
                                                   class="form-control" 
                                                   placeholder="YakÄ±n akraba adÄ±"
                                                   maxlength="100">
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="form-group">
                                            <label for="hastaEmergencyPhone" class="form-label">
                                                ğŸ“± Acil Durum Telefonu
                                            </label>
                                            <input type="tel" 
                                                   id="hastaEmergencyPhone" 
                                                   name="emergencyPhone" 
                                                   class="form-control" 
                                                   placeholder="0555 123 45 67"
                                                   maxlength="15">
                                        </div>
                                    </div>
                                </div>

                                <!-- KayÄ±t Butonu -->
                                <div class="form-group text-center">
                                    <button type="submit" class="btn btn-primary btn-lg w-100">
                                        ğŸ¥ Hasta Olarak KayÄ±t Ol
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Doktor KayÄ±t Formu -->
        <div id="doktorForm" class="form-container" style="display: none;">
            <div class="row">
                <div class="col-8" style="margin: 0 auto;">
                    <div class="card fade-in">
                        <div class="card-header text-center">
                            <h2 style="margin: 0; color: #333;">
                                ğŸ‘¨â€âš•ï¸ Doktor KayÄ±t Formu
                            </h2>
                            <p style="margin: 0.5rem 0 0; color: #6c757d;">
                                Randevu verebilmek iÃ§in bilgilerinizi girin
                            </p>
                        </div>
                        <div class="card-body">
                            <form th:action="@{/register/doktor}" method="post" id="doktorRegisterForm">
                                <div class="row">
                                    <!-- Sol Kolon -->
                                    <div class="col-6">
                                        <!-- KullanÄ±cÄ± AdÄ± -->
                                        <div class="form-group">
                                            <label for="doktorUsername" class="form-label">
                                                ğŸ‘¤ KullanÄ±cÄ± AdÄ± *
                                            </label>
                                            <input type="text" 
                                                   id="doktorUsername" 
                                                   name="username" 
                                                   class="form-control" 
                                                   placeholder="KullanÄ±cÄ± adÄ±nÄ±zÄ± girin"
                                                   required
                                                   minlength="3"
                                                   maxlength="50">
                                            <small class="availability-message" id="doktorUsernameCheck"></small>
                                        </div>

                                        <!-- Ad -->
                                        <div class="form-group">
                                            <label for="doktorFirstName" class="form-label">
                                                ğŸ“ Ad *
                                            </label>
                                            <input type="text" 
                                                   id="doktorFirstName" 
                                                   name="firstName" 
                                                   class="form-control" 
                                                   placeholder="AdÄ±nÄ±zÄ± girin"
                                                   required
                                                   maxlength="50">
                                        </div>

                                        <!-- Soyad -->
                                        <div class="form-group">
                                            <label for="doktorLastName" class="form-label">
                                                ğŸ“ Soyad *
                                            </label>
                                            <input type="text" 
                                                   id="doktorLastName" 
                                                   name="lastName" 
                                                   class="form-control" 
                                                   placeholder="SoyadÄ±nÄ±zÄ± girin"
                                                   required
                                                   maxlength="50">
                                        </div>

                                        <!-- Email -->
                                        <div class="form-group">
                                            <label for="doktorEmail" class="form-label">
                                                ğŸ“§ Email *
                                            </label>
                                            <input type="email" 
                                                   id="doktorEmail" 
                                                   name="email" 
                                                   class="form-control" 
                                                   placeholder="email@ornek.com"
                                                   required
                                                   maxlength="100">
                                            <small class="availability-message" id="doktorEmailCheck"></small>
                                        </div>

                                        <!-- Telefon -->
                                        <div class="form-group">
                                            <label for="doktorPhone" class="form-label">
                                                ğŸ“ Telefon
                                            </label>
                                            <input type="tel" 
                                                   id="doktorPhone" 
                                                   name="phone" 
                                                   class="form-control" 
                                                   placeholder="0555 123 45 67"
                                                   maxlength="15">
                                        </div>

                                        <!-- Diploma NumarasÄ± -->
                                        <div class="form-group">
                                            <label for="doktorDiplomaNo" class="form-label">
                                                ğŸ“ Diploma NumarasÄ± *
                                            </label>
                                            <input type="text" 
                                                   id="doktorDiplomaNo" 
                                                   name="diplomaNo" 
                                                   class="form-control" 
                                                   placeholder="DP123456"
                                                   required
                                                   maxlength="20">
                                            <small class="availability-message" id="doktorDiplomaCheck"></small>
                                        </div>
                                    </div>

                                    <!-- SaÄŸ Kolon -->
                                    <div class="col-6">
                                        <!-- Åifre -->
                                        <div class="form-group">
                                            <label for="doktorPassword" class="form-label">
                                                ğŸ”’ Åifre *
                                            </label>
                                            <input type="password" 
                                                   id="doktorPassword" 
                                                   name="password" 
                                                   class="form-control" 
                                                   placeholder="En az 6 karakter"
                                                   required
                                                   minlength="6">
                                        </div>

                                        <!-- Åifre Tekrar -->
                                        <div class="form-group">
                                            <label for="doktorPasswordConfirm" class="form-label">
                                                ğŸ”’ Åifre Tekrar *
                                            </label>
                                            <input type="password" 
                                                   id="doktorPasswordConfirm" 
                                                   name="passwordConfirm" 
                                                   class="form-control" 
                                                   placeholder="Åifrenizi tekrar girin"
                                                   required
                                                   minlength="6">
                                            <small class="password-match-message" id="doktorPasswordMatch"></small>
                                        </div>

                                        <!-- UzmanlÄ±k AlanÄ± -->
                                        <div class="form-group">
                                            <label for="doktorSpecialization" class="form-label">
                                                ğŸ©º UzmanlÄ±k AlanÄ± *
                                            </label>
                                            <select id="doktorSpecialization" name="specialization" class="form-control form-select" required>
                                                <option value="">SeÃ§iniz</option>
                                                <option value="Kardiyoloji">Kardiyoloji</option>
                                                <option value="NÃ¶roloji">NÃ¶roloji</option>
                                                <option value="Ortopedi">Ortopedi</option>
                                                <option value="GÃ¶ÄŸÃ¼s HastalÄ±klarÄ±">GÃ¶ÄŸÃ¼s HastalÄ±klarÄ±</option>
                                                <option value="Dahiliye">Dahiliye</option>
                                                <option value="Ãœroloji">Ãœroloji</option>
                                                <option value="KadÄ±n DoÄŸum">KadÄ±n DoÄŸum</option>
                                                <option value="Ã‡ocuk SaÄŸlÄ±ÄŸÄ±">Ã‡ocuk SaÄŸlÄ±ÄŸÄ±</option>
                                                <option value="GÃ¶z HastalÄ±klarÄ±">GÃ¶z HastalÄ±klarÄ±</option>
                                                <option value="Kulak Burun BoÄŸaz">Kulak Burun BoÄŸaz</option>
                                                <option value="Cildiye">Cildiye</option>
                                                <option value="Psikiyatri">Psikiyatri</option>
                                                <option value="DiÄŸer">DiÄŸer</option>
                                            </select>
                                        </div>

                                        <!-- Hastane -->
                                        <div class="form-group">
                                            <label for="doktorHospital" class="form-label">
                                                ğŸ¥ Hastane/Klinik
                                            </label>
                                            <input type="text" 
                                                   id="doktorHospital" 
                                                   name="hospital" 
                                                   class="form-control" 
                                                   placeholder="Ã‡alÄ±ÅŸtÄ±ÄŸÄ±nÄ±z hastane"
                                                   maxlength="200">
                                        </div>

                                        <!-- Deneyim YÄ±lÄ± -->
                                        <div class="form-group">
                                            <label for="doktorExperience" class="form-label">
                                                ğŸ“… Deneyim (YÄ±l)
                                            </label>
                                            <input type="number" 
                                                   id="doktorExperience" 
                                                   name="experienceYears" 
                                                   class="form-control" 
                                                   placeholder="5"
                                                   min="0"
                                                   max="50">
                                            </div>

                                       <!-- Randevu Ãœcreti -->
                                       <div class="form-group">
                                           <label for="doktorFee" class="form-label">
                                               ğŸ’° Randevu Ãœcreti (TL)
                                           </label>
                                           <input type="number" 
                                                  id="doktorFee" 
                                                  name="consultationFee" 
                                                  class="form-control" 
                                                  placeholder="200"
                                                  min="0"
                                                  step="0.01">
                                       </div>
                                   </div>
                               </div>

                               <!-- Muayenehane Adresi -->
                               <div class="form-group">
                                   <label for="doktorClinicAddress" class="form-label">
                                       ğŸ¢ Muayenehane Adresi
                                   </label>
                                   <textarea id="doktorClinicAddress" 
                                             name="clinicAddress" 
                                             class="form-control textarea" 
                                             placeholder="Muayenehane adresinizi girin"
                                             maxlength="500"></textarea>
                               </div>

                               <!-- HakkÄ±nda -->
                               <div class="form-group">
                                   <label for="doktorAbout" class="form-label">
                                       ğŸ“‹ HakkÄ±nÄ±zda
                                   </label>
                                   <textarea id="doktorAbout" 
                                             name="about" 
                                             class="form-control textarea" 
                                             placeholder="Kendiniz ve uzmanlÄ±ÄŸÄ±nÄ±z hakkÄ±nda kÄ±sa bilgi"
                                             maxlength="1000"></textarea>
                               </div>

                               <!-- KayÄ±t Butonu -->
                               <div class="form-group text-center">
                                   <button type="submit" class="btn btn-primary btn-lg w-100">
                                       ğŸ‘¨â€âš•ï¸ Doktor Olarak KayÄ±t Ol
                                   </button>
                               </div>
                           </form>
                       </div>
                   </div>
               </div>
           </div>
       </div>

       <!-- GiriÅŸ Yap BaÄŸlantÄ±sÄ± -->
       <div class="text-center mt-4">
           <p style="color: #6c757d;">
               Zaten hesabÄ±nÄ±z var mÄ±? 
               <a th:href="@{/login}" style="color: #007bff; text-decoration: none; font-weight: 600;">
                   GiriÅŸ YapÄ±n
               </a>
           </p>
       </div>
   </main>

   <!-- Footer -->
   <footer class="footer">
       <div class="container">
           <p>&copy; 2025 Randevu Sistemi. TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
       </div>
   </footer>

   <!-- JavaScript -->
   <script>
       // Tab deÄŸiÅŸtirme fonksiyonu
       function showTab(tab) {
           const hastaForm = document.getElementById('hastaForm');
           const doktorForm = document.getElementById('doktorForm');
           const hastaTab = document.getElementById('hastaTab');
           const doktorTab = document.getElementById('doktorTab');

           if (tab === 'hasta') {
               hastaForm.style.display = 'block';
               doktorForm.style.display = 'none';
               hastaTab.className = 'btn btn-primary btn-lg';
               doktorTab.className = 'btn btn-secondary btn-lg';
           } else {
               hastaForm.style.display = 'none';
               doktorForm.style.display = 'block';
               hastaTab.className = 'btn btn-secondary btn-lg';
               doktorTab.className = 'btn btn-primary btn-lg';
           }
       }

       // KullanÄ±cÄ± adÄ± kontrolÃ¼ (debounced)
       function checkUsername(username, elementId, userType) {
           if (username.length < 3) {
               document.getElementById(elementId).innerHTML = '';
               return;
           }

           fetch(`/check-username?username=${encodeURIComponent(username)}`)
               .then(response => response.json())
               .then(data => {
                   const element = document.getElementById(elementId);
                   if (data.exists) {
                       element.innerHTML = 'âŒ Bu kullanÄ±cÄ± adÄ± zaten kullanÄ±lÄ±yor';
                       element.style.color = '#dc3545';
                   } else {
                       element.innerHTML = 'âœ… KullanÄ±cÄ± adÄ± uygun';
                       element.style.color = '#28a745';
                   }
               })
               .catch(error => {
                   console.error('Error:', error);
               });
       }

       // Email kontrolÃ¼
       function checkEmail(email, elementId) {
           if (!email || !email.includes('@')) {
               document.getElementById(elementId).innerHTML = '';
               return;
           }

           fetch(`/check-email?email=${encodeURIComponent(email)}`)
               .then(response => response.json())
               .then(data => {
                   const element = document.getElementById(elementId);
                   if (data.exists) {
                       element.innerHTML = 'âŒ Bu email adresi zaten kullanÄ±lÄ±yor';
                       element.style.color = '#dc3545';
                   } else {
                       element.innerHTML = 'âœ… Email adresi uygun';
                       element.style.color = '#28a745';
                   }
               })
               .catch(error => {
                   console.error('Error:', error);
               });
       }

       // T.C. kimlik no kontrolÃ¼
       function checkTcNo(tcNo) {
           if (!tcNo || tcNo.length !== 11) {
               document.getElementById('hastaTcCheck').innerHTML = '';
               return;
           }

           fetch(`/check-tcno?tcNo=${encodeURIComponent(tcNo)}`)
               .then(response => response.json())
               .then(data => {
                   const element = document.getElementById('hastaTcCheck');
                   if (data.exists) {
                       element.innerHTML = 'âŒ Bu T.C. kimlik numarasÄ± zaten kayÄ±tlÄ±';
                       element.style.color = '#dc3545';
                   } else {
                       element.innerHTML = 'âœ… T.C. kimlik numarasÄ± uygun';
                       element.style.color = '#28a745';
                   }
               })
               .catch(error => {
                   console.error('Error:', error);
               });
       }

       // Diploma numarasÄ± kontrolÃ¼
       function checkDiplomaNo(diplomaNo) {
           if (!diplomaNo || diplomaNo.length < 3) {
               document.getElementById('doktorDiplomaCheck').innerHTML = '';
               return;
           }

           fetch(`/check-diploma?diplomaNo=${encodeURIComponent(diplomaNo)}`)
               .then(response => response.json())
               .then(data => {
                   const element = document.getElementById('doktorDiplomaCheck');
                   if (data.exists) {
                       element.innerHTML = 'âŒ Bu diploma numarasÄ± zaten kayÄ±tlÄ±';
                       element.style.color = '#dc3545';
                   } else {
                       element.innerHTML = 'âœ… Diploma numarasÄ± uygun';
                       element.style.color = '#28a745';
                   }
               })
               .catch(error => {
                   console.error('Error:', error);
               });
       }

       // Åifre eÅŸleÅŸme kontrolÃ¼
       function checkPasswordMatch(password, confirmPassword, elementId) {
           const element = document.getElementById(elementId);
           
           if (!confirmPassword) {
               element.innerHTML = '';
               return;
           }

           if (password === confirmPassword) {
               element.innerHTML = 'âœ… Åifreler eÅŸleÅŸiyor';
               element.style.color = '#28a745';
           } else {
               element.innerHTML = 'âŒ Åifreler eÅŸleÅŸmiyor';
               element.style.color = '#dc3545';
           }
       }

       // Event listener'larÄ± ekle
       document.addEventListener('DOMContentLoaded', function() {
           // Hasta form event listeners
           let hastaUsernameTimeout;
           document.getElementById('hastaUsername').addEventListener('input', function(e) {
               clearTimeout(hastaUsernameTimeout);
               hastaUsernameTimeout = setTimeout(() => {
                   checkUsername(e.target.value, 'hastaUsernameCheck', 'hasta');
               }, 500);
           });

           let hastaEmailTimeout;
           document.getElementById('hastaEmail').addEventListener('input', function(e) {
               clearTimeout(hastaEmailTimeout);
               hastaEmailTimeout = setTimeout(() => {
                   checkEmail(e.target.value, 'hastaEmailCheck');
               }, 500);
           });

           let hastaTcTimeout;
           document.getElementById('hastaTcNo').addEventListener('input', function(e) {
               clearTimeout(hastaTcTimeout);
               hastaTcTimeout = setTimeout(() => {
                   checkTcNo(e.target.value);
               }, 500);
           });

           document.getElementById('hastaPasswordConfirm').addEventListener('input', function(e) {
               const password = document.getElementById('hastaPassword').value;
               checkPasswordMatch(password, e.target.value, 'hastaPasswordMatch');
           });

           // Doktor form event listeners
           let doktorUsernameTimeout;
           document.getElementById('doktorUsername').addEventListener('input', function(e) {
               clearTimeout(doktorUsernameTimeout);
               doktorUsernameTimeout = setTimeout(() => {
                   checkUsername(e.target.value, 'doktorUsernameCheck', 'doktor');
               }, 500);
           });

           let doktorEmailTimeout;
           document.getElementById('doktorEmail').addEventListener('input', function(e) {
               clearTimeout(doktorEmailTimeout);
               doktorEmailTimeout = setTimeout(() => {
                   checkEmail(e.target.value, 'doktorEmailCheck');
               }, 500);
           });

           let doktorDiplomaTimeout;
           document.getElementById('doktorDiplomaNo').addEventListener('input', function(e) {
               clearTimeout(doktorDiplomaTimeout);
               doktorDiplomaTimeout = setTimeout(() => {
                   checkDiplomaNo(e.target.value);
               }, 500);
           });

           document.getElementById('doktorPasswordConfirm').addEventListener('input', function(e) {
               const password = document.getElementById('doktorPassword').value;
               checkPasswordMatch(password, e.target.value, 'doktorPasswordMatch');
           });

           // T.C. kimlik no sadece rakam kabul etsin
           document.getElementById('hastaTcNo').addEventListener('input', function(e) {
               e.target.value = e.target.value.replace(/[^0-9]/g, '');
           });

           // Telefon numarasÄ± formatÄ±
           const phoneInputs = document.querySelectorAll('input[type="tel"]');
           phoneInputs.forEach(input => {
               input.addEventListener('input', function(e) {
                   let value = e.target.value.replace(/[^0-9]/g, '');
                   if (value.length > 0) {
                       if (value.length <= 4) {
                           value = value;
                       } else if (value.length <= 7) {
                           value = value.slice(0, 4) + ' ' + value.slice(4);
                       } else if (value.length <= 9) {
                           value = value.slice(0, 4) + ' ' + value.slice(4, 7) + ' ' + value.slice(7);
                       } else {
                           value = value.slice(0, 4) + ' ' + value.slice(4, 7) + ' ' + value.slice(7, 9) + ' ' + value.slice(9, 11);
                       }
                   }
                   e.target.value = value;
               });
           });
       });

       // Form validasyonu
       document.getElementById('hastaRegisterForm').addEventListener('submit', function(e) {
           const password = document.getElementById('hastaPassword').value;
           const confirmPassword = document.getElementById('hastaPasswordConfirm').value;
           
           if (password !== confirmPassword) {
               e.preventDefault();
               alert('âš ï¸ Åifreler eÅŸleÅŸmiyor!');
               return;
           }

           const tcNo = document.getElementById('hastaTcNo').value;
           if (tcNo && (tcNo.length !== 11 || !/^[0-9]+$/.test(tcNo))) {
               e.preventDefault();
               alert('âš ï¸ T.C. kimlik numarasÄ± 11 haneli olmalÄ±dÄ±r!');
               return;
           }
       });

       document.getElementById('doktorRegisterForm').addEventListener('submit', function(e) {
           const password = document.getElementById('doktorPassword').value;
           const confirmPassword = document.getElementById('doktorPasswordConfirm').value;
           
           if (password !== confirmPassword) {
               e.preventDefault();
               alert('âš ï¸ Åifreler eÅŸleÅŸmiyor!');
               return;
           }
       });

       // Sayfa yÃ¼klendiÄŸinde hasta formu gÃ¶ster
       showTab('hasta');
   </script>

   <style>
       .availability-message {
           display: block;
           margin-top: 0.25rem;
           font-weight: 600;
       }

       .password-match-message {
           display: block;
           margin-top: 0.25rem;
           font-weight: 600;
       }

       .form-container {
           animation: fadeIn 0.5s ease-out;
       }

       @media (max-width: 768px) {
           .col-6 {
               flex: 0 0 100%;
               max-width: 100%;
           }
           
           #hastaTab, #doktorTab {
               width: 100%;
               margin-bottom: 0.5rem;
           }
       }
   </style>
</body>
</html> 